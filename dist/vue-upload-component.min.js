!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VueUploadComponent=t():e.VueUploadComponent=t()}(this,function(){return function(e){function t(i){if(r[i])return r[i].exports;var o=r[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="/dist/",t(0)}([function(e,t,r){"use strict";e.exports=r(5)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{title:{type:String,"default":"Upload file"},name:{type:String,required:!0},id:{type:String},action:{type:String,required:!0},accept:{type:String},multiple:{type:String},timeout:{type:Number},size:{type:Number}},components:{inputFile:{template:'<input type="file" :name="$parent.name" :id="$parent.id||$parent.name" :accept="$parent.accept" @change="change" :multiple="$parent.multiple && $parent.$mode == \'html5\'">',methods:{change:function(e){this.$parent._addFileUploads(e.target),this.$destroy()}}}},data:function(){return{files:[],active:!1,uploaded:!0,request:{data:{},headers:{}}}},init:function(){var e=document.createElement("input");e.type="file",window.FormData&&e.files?this.$mode="html5":this.$mode="html4",this._index=0,this._files={}},beforeDestroy:function(){this.active=!1,this.files=[]},watch:{files:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];i.errno||i.success||(this.uploaded=!1),t.push(i.id)}for(var o in this._files)if(-1==t.indexOf(o)){var i=this._files[o]._file;i.removed=!0;var n=this._files[o].xhr;n&&(n.abort(),n.timeout=1);var s=this._files[o].iframe;s&&s.onabort({type:"abort"}),delete this._files[o],this.$dispatch("removeFileUpload",i,this)}this._index=0},active:function(e,t){e&&!t&&this._fileUploads()},uploaded:function(e){e&&(this.active=!1)}},methods:{_addFileUploads:function(e){var t=this.$options.components.inputFile;if(new t({parent:this,el:e}),this.uploaded=!1,e.files)for(var r=0;r<e.files.length;r++){var i=e.files[r],o="upload-file-"+Math.random().toString(36).substr(2),n={id:o,size:i.size,name:i.name,progress:"0.00",active:!1,error:"",errno:"",success:!1,data:{},request:{headers:{},data:{}}};this._files[o]={el:e,file:i};var s;this.multiple?s=this.files.push(n):(this.files=[n],s=1),this._files[o]._file=this.files[s-1],this.$dispatch("addFileUpload",this.files[s-1],this)}else{var o="upload-file-"+Math.random().toString(36).substr(2),n={id:o,size:-1,name:e.value.replace(/^.*?([^\/\\\r\n]+)$/,"$1"),progress:"0.00",active:!1,error:"",errno:"",success:!1,data:{},request:{headers:{},data:{}}};this._files[o]={el:e};var s;this.multiple?s=this.files.push(n):(this.files=[n],s=1);var s=this.files.push(i);this._files[o]._file=this.files[s-1],this.$dispatch("addFileUpload",this.files[s-1],this)}},_fileUploads:function(){if(this.active){for(;this._index<this.files.length;this._index++){var e=this.files[this._index];if(!(e.active||e.success||e.errno)){if(!(this.size&&this.size>0&&e.size>=0&&e.size>this.size))return void("html5"==this.$mode?this._fileUploadHtml5(e):this._fileUploadHtml4(e));e.error="Size",e.errno="size"}}this.active=!1,this.uploaded=!0}},_fileUploadHtml5:function(e){var t=this,r=this._files[e.id],i=!1,o=new window.FormData;o.append(this.name,r.file);for(var n in this.request.data)o.append(n,this.request.data[n]);for(var n in e.request.data)o.append(n,e.request.data[n]);var s=new XMLHttpRequest;s.upload.onprogress=function(r){return e.removed?void s.abort():t.active&&e.active?(r.lengthComputable&&(e.progress=(r.loaded/r.total*100).toFixed(2)),void t.$dispatch("fileUploadProgress",e,t)):void s.abort()};var a=function(r){switch(r.type){case"timeout":e.errno="timeout",e.error="Timeout";break;case"abort":e.errno="abort",e.error="Abort";break;case"error":s.status?s.status>=500?(e.errno="server",e.error="Server"):s.status>=400&&(e.errno="denied",e.error="Denied"):(e.errno="network",e.error="Network");break;default:s.status>=500?(e.errno="server",e.error="Server"):s.status>=400?(e.errno="denied",e.error="Denied"):(e.progress="100.00",e.success=!0)}if(e.active=!1,s.responseText){var o=s.getResponseHeader("Content-Type");o&&-1!=o.indexOf("/json")?e.data=JSON.parse(s.responseText):e.data=s.responseText}i||(i=!0,e.removed||t.$dispatch("afterFileUpload",e,t),setTimeout(function(){t._fileUploads()},50))};s.onload=a,s.onerror=a,s.onabort=a,s.ontimeout=a,this.timeout&&(s.timeout=this.timeout),s.open("POST",this.action),s.setRequestHeader("X-Requested-With","XMLHttpRequest");for(var n in this.request.headers)s.setRequestHeader(n,this.request.headers[n]);for(var n in e.request.headers)s.setRequestHeader(n,e.request.headers[n]);s.send(o),e.active=!0,r.xhr=s;var l=setInterval(function(){t.active&&e.active&&!e.success&&!e.errno||(clearInterval(l),e.success||e.errno||s.abort())},50);this.$dispatch("beforeFileUpload",e,this)},_fileUploadHtml4:function(e){var t=this,r=this._files[e.id],i=!1,o=function(e){27==e.keyCode&&e.preventDefault()},n=document.createElement("iframe");n.id="upload-iframe-"+e.id,n.name="upload-iframe-"+e.id,n.src="about:blank",n.style.width="1px",n.style.height="1px",n.style.top="-9999px",n.style.left="-9999px",n.style.position="absolute",n.style.marginTop="-9999em";var s=document.createElement("form");s.action=this.action,s.name="upload-form-"+e.id,s.setAttribute("method","POST"),s.setAttribute("target","upload-iframe-"+e.id),s.setAttribute("enctype","multipart/form-data"),s.appendChild(r.el);for(var a in this.request.data){var l=document.createElement("input");l.type="hidden",l.name=a,l.value=this.request.data[a],s.appendChild(l)}for(var a in e.request.data){var l=document.createElement("input");l.type="hidden",l.name=a,l.value=e.request.data[a],s.appendChild(l)}var d=function(){var e;try{n.contentWindow&&(e=n.contentWindow.document)}catch(t){}if(!e)try{e=n.contentDocument?n.contentDocument:n.document}catch(t){e=n.document}return e&&e.body?e.body.innerHTML:null},u=function(r){switch(r.type){case"abort":e.errno="abort",e.error="Abort";break;case"error":var s=d();e.errno||(null===s?(e.errno="network",e.error="Network"):(e.errno="denied",e.error="Denied"));break;default:var s=d();e.errno||(null===s?(e.errno="network",e.error="Network"):(e.progress="100.00",e.success=!0))}if(e.active=!1,"undefined"!=typeof s){if(s&&"{"==s.substr(0,1)&&"}"==s.substr(s.length-1,1))try{s=JSON.parse(s)}catch(a){}e.data=s}i||(document.body.removeEventListener("keydown",o),document.body.removeEventListener("keydown",o),i=!0,n.parentNode&&n.parentNode.removeChild(n),e.removed||t.$dispatch("afterFileUpload",e,t),setTimeout(function(){t._fileUploads()},50))};setTimeout(function(){document.body.appendChild(n).appendChild(s).submit(),n.onload=u,n.onerror=u,n.onabort=u,e.active=!0,r.iframe=n,document.body.addEventListener("keydown",o);var i=setInterval(function(){t.active&&e.active&&!e.success&&!e.errno||(clearInterval(i),e.success||e.errno||n.onabort({type:"abort"}))},50);t.$dispatch("beforeFileUpload",e,this)},10)}}}},function(e,t,r){t=e.exports=r(3)(),t.push([e.id,".file-uploads-label{overflow:hidden;position:relative;text-align:center}.file-uploads-label span{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.file-uploads-label input{z-index:1;opacity:0;font-size:20em;top:0;left:0;right:0;bottom:0;position:absolute;width:100%;height:100%}.file-uploads-label.file-uploads-html5 input{width:1px!important;height:1px!important;top:-1px!important;left:-1px!important;right:auto!important;bottom:auto!important}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];r[2]?e.push("@media "+r[2]+"{"+r[1]+"}"):e.push(r[1])}return e.join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var n=this[o][0];"number"==typeof n&&(i[n]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&i[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),e.push(s))}},e}},function(e,t){e.exports="<div> <label :for=id||name :class=\"{'file-uploads-label': true, 'file-uploads-html5': $mode == 'html5', 'file-uploads-html4': $mode == 'html4'}\"> <span>{{title}}</span> <input-file></input-file> </label> </div>"},function(e,t,r){var i,o;r(7),i=r(1),o=r(4),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,r){function i(e,t){for(var r=0;r<e.length;r++){var i=e[r],o=p[i.id];if(o){o.refs++;for(var n=0;n<o.parts.length;n++)o.parts[n](i.parts[n]);for(;n<i.parts.length;n++)o.parts.push(l(i.parts[n],t))}else{for(var s=[],n=0;n<i.parts.length;n++)s.push(l(i.parts[n],t));p[i.id]={id:i.id,refs:1,parts:s}}}}function o(e){for(var t=[],r={},i=0;i<e.length;i++){var o=e[i],n=o[0],s=o[1],a=o[2],l=o[3],d={css:s,media:a,sourceMap:l};r[n]?r[n].parts.push(d):t.push(r[n]={id:n,parts:[d]})}return t}function n(e,t){var r=h(),i=b[b.length-1];if("top"===e.insertAt)i?i.nextSibling?r.insertBefore(t,i.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",n(e,t),t}function l(e,t){var r,i,o;if(t.singleton){var n=v++;r=m||(m=a(t)),i=d.bind(null,r,n,!1),o=d.bind(null,r,n,!0)}else r=a(t),i=u.bind(null,r),o=function(){s(r)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function d(e,t,r,i){var o=r?"":i.css;if(e.styleSheet)e.styleSheet.cssText=y(t,o);else{var n=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(n,s[t]):e.appendChild(n)}}function u(e,t){var r=t.css,i=t.media,o=t.sourceMap;if(i&&e.setAttribute("media",i),o&&(r+="\n/*# sourceURL="+o.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},c=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=f(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,v=0,b=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=c()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var r=o(e);return i(r,t),function(e){for(var n=[],s=0;s<r.length;s++){var a=r[s],l=p[a.id];l.refs--,n.push(l)}if(e){var d=o(e);i(d,t)}for(var s=0;s<n.length;s++){var l=n[s];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete p[l.id]}}}};var y=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,t,r){var i=r(2);"string"==typeof i&&(i=[[e.id,i,""]]);r(6)(i,{});i.locals&&(e.exports=i.locals)}])});
//# sourceMappingURL=vue-upload-component.min.js.map