!function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="/dist/",t(0)}([function(e,t,r){"use strict";var i=r(5);new Vue({el:"#app",components:{FileUpload:i},data:{accept:"image/*",size:10485760,multiple:!0},compiled:function(){this.$refs.upload.request={headers:{"X-Csrf-Token":"xxxx"},data:{_csrf_token:"xxxxxx"}}},methods:{remove:function(e){this.$refs.upload.files.$remove(e)}}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{title:{type:String,"default":"Upload file"},name:{type:String,required:!0},id:{type:String},action:{type:String,required:!0},accept:{type:String},multiple:{type:String},timeout:{type:Number},size:{type:Number}},components:{inputFile:{template:'<input type="file" :name="$parent.name" :id="$parent.id||$parent.name" :accept="$parent.accept" @change="change" :multiple="$parent.multiple && $parent.$mode == \'html5\'">',methods:{change:function(e){this.$parent._addFileUploads(e.target),this.$destroy()}}}},data:function(){return{files:[],active:!1,uploaded:!0,request:{data:{},headers:{}}}},init:function(){var e=document.createElement("input");e.type="file",window.FormData&&e.files?this.$mode="html5":this.$mode="html4",this._index=0,this._files={}},watch:{files:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];i.errno||i.success||(this.uploaded=!1),t.push(i.id)}for(var n in this._files)if(-1==t.indexOf(n)){var i=this._files[n]._file;i.removed=!0;var o=this._files[n].xhr;o&&(o.abort(),o.timeout=1);var s=this._files[n].iframe;s&&s.onabort({type:"abort"}),delete this._files[n],this.$dispatch("removeFileUpload",i,this)}this._index=0},active:function(e,t){e&&!t&&this._fileUploads()},uploaded:function(e){e&&(this.active=!1)}},methods:{_addFileUploads:function(e){var t=this.$options.components.inputFile;if(new t({parent:this,el:e}),this.uploaded=!1,e.files)for(var r=0;r<e.files.length;r++){var i=e.files[r],n="upload-file-"+Math.random().toString(36).substr(2),o={id:n,size:i.size,name:i.name,progress:"0.00",active:!1,error:"",errno:"",success:!1,data:{},request:{headers:{},data:{}}};this._files[n]={el:e,file:i};var s;this.multiple?s=this.files.push(o):(this.files=[o],s=1),this._files[n]._file=this.files[s-1],this.$dispatch("addFileUpload",this.files[s-1],this)}else{var n="upload-file-"+Math.random().toString(36).substr(2),o={id:n,size:-1,name:e.value.replace(/^.*?([^\/\\\r\n]+)$/,"$1"),progress:"0.00",active:!1,error:"",errno:"",success:!1,data:{},request:{headers:{},data:{}}};this._files[n]={el:e};var s;this.multiple?s=this.files.push(o):(this.files=[o],s=1);var s=this.files.push(i);this._files[n]._file=this.files[s-1],this.$dispatch("addFileUpload",this.files[s-1],this)}},_fileUploads:function(){if(this.active){for(;this._index<this.files.length;this._index++){var e=this.files[this._index];if(!(e.active||e.success||e.errno)){if(!(this.size&&this.size>0&&e.size>=0&&e.size>this.size))return void("html5"==this.$mode?this._fileUploadHtml5(e):this._fileUploadHtml4(e));e.error="Size",e.errno="size"}}this.active=!1,this.uploaded=!0}},_fileUploadHtml5:function(e){var t=this,r=this._files[e.id],i=!1,n=new window.FormData;n.append(this.name,r.file);for(var o in this.request.data)n.append(o,this.request.data[o]);for(var o in e.request.data)n.append(o,e.request.data[o]);var s=new XMLHttpRequest;s.upload.onprogress=function(r){return e.removed?void s.abort():t.active&&e.active?(r.lengthComputable&&(e.progress=(r.loaded/r.total*100).toFixed(2)),void t.$dispatch("fileUploadProgress",e,t)):void s.abort()};var a=function(r){switch(r.type){case"timeout":e.errno="timeout",e.error="Timeout";break;case"abort":e.errno="abort",e.error="Abort";break;case"error":s.status?s.status>=500?(e.errno="server",e.error="Server"):s.status>=400&&(e.errno="denied",e.error="Denied"):(e.errno="network",e.error="Network");break;default:s.status>=500?(e.errno="server",e.error="Server"):s.status>=400?(e.errno="denied",e.error="Denied"):(e.progress="100.00",e.success=!0)}if(e.active=!1,s.responseText){var n=s.getResponseHeader("Content-Type");n&&-1!=n.indexOf("/json")?e.data=JSON.parse(s.responseText):e.data=s.responseText}i||(i=!0,e.removed||t.$dispatch("afterFileUpload",e,t),setTimeout(function(){t._fileUploads()},50))};s.onload=a,s.onerror=a,s.onabort=a,s.ontimeout=a,this.timeout&&(s.timeout=this.timeout),s.open("POST",this.action);for(var o in this.request.headers)s.setRequestHeader(o,this.request.headers[o]);for(var o in e.request.headers)s.setRequestHeader(o,e.request.headers[o]);s.send(n),e.active=!0,r.xhr=s;var l=setInterval(function(){t.active&&e.active&&!e.success&&!e.errno||(clearInterval(l),e.success||e.errno||s.abort())},50);this.$dispatch("beforeFileUpload",e,this)},_fileUploadHtml4:function(e){var t=this,r=this._files[e.id],i=!1,n=function(e){27==e.keyCode&&e.preventDefault()},o=document.createElement("iframe");o.id="upload-iframe-"+e.id,o.name="upload-iframe-"+e.id,o.src="about:blank",o.style.width="1px",o.style.height="1px",o.style.top="-9999px",o.style.left="-9999px",o.style.position="absolute",o.style.marginTop="-9999em";var s=document.createElement("form");s.action=this.action,s.name="upload-form-"+e.id,s.setAttribute("method","POST"),s.setAttribute("target","upload-iframe-"+e.id),s.setAttribute("enctype","multipart/form-data"),s.appendChild(r.el);for(var a in this.request.data){var l=document.createElement("input");l.type="hidden",l.name=a,l.value=this.request.data[a],s.appendChild(l)}for(var a in e.request.data){var l=document.createElement("input");l.type="hidden",l.name=a,l.value=e.request.data[a],s.appendChild(l)}var d=function(){var e;try{o.contentWindow&&(e=o.contentWindow.document)}catch(t){}if(!e)try{e=o.contentDocument?o.contentDocument:o.document}catch(t){e=o.document}return e&&e.body?e.body.innerHTML:null},u=function(r){switch(r.type){case"abort":e.errno="abort",e.error="Abort";break;case"error":var s=d();e.errno||(null===s?(e.errno="network",e.error="Network"):(e.errno="denied",e.error="Denied"));break;default:var s=d();e.errno||(null===s?(e.errno="network",e.error="Network"):(e.progress="100.00",e.success=!0))}if(e.active=!1,"undefined"!=typeof s){if(s&&"{"==s.substr(0,1)&&"}"==s.substr(s.length-1,1))try{s=JSON.parse(s)}catch(a){}e.data=s}i||(document.body.removeEventListener("keydown",n),document.body.removeEventListener("keydown",n),i=!0,o.parentNode&&o.parentNode.removeChild(o),e.removed||t.$dispatch("afterFileUpload",e,t),setTimeout(function(){t._fileUploads()},50))};setTimeout(function(){document.body.appendChild(o).appendChild(s).submit(),o.onload=u,o.onerror=u,o.onabort=u,e.active=!0,r.iframe=o,document.body.addEventListener("keydown",n);var i=setInterval(function(){t.active&&e.active&&!e.success&&!e.errno||(clearInterval(i),e.success||e.errno||o.onabort({type:"abort"}))},50);t.$dispatch("beforeFileUpload",e,this)},10)}}}},function(e,t,r){t=e.exports=r(3)(),t.push([e.id,".file-uploads-label{overflow:hidden;position:relative;text-align:center}.file-uploads-label span{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.file-uploads-label input{z-index:1;opacity:0;font-size:20em;top:0;left:0;right:0;bottom:0;position:absolute;width:100%;height:100%}.file-uploads-label.file-uploads-html5 input{width:1px!important;height:1px!important;top:-1px!important;left:-1px!important;right:auto!important;bottom:auto!important}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];r[2]?e.push("@media "+r[2]+"{"+r[1]+"}"):e.push(r[1])}return e.join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(i[o]=!0)}for(n=0;n<t.length;n++){var s=t[n];"number"==typeof s[0]&&i[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),e.push(s))}},e}},function(e,t){e.exports="<div> <label :for=id||name :class=\"{'file-uploads-label': true, 'file-uploads-html5': $mode == 'html5', 'file-uploads-html4': $mode == 'html4'}\"> <span>{{title}}</span> <input-file></input-file> </label> </div>"},function(e,t,r){var i,n;r(7),i=r(1),n=r(4),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},function(e,t,r){function i(e,t){for(var r=0;r<e.length;r++){var i=e[r],n=p[i.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](i.parts[o]);for(;o<i.parts.length;o++)n.parts.push(l(i.parts[o],t))}else{for(var s=[],o=0;o<i.parts.length;o++)s.push(l(i.parts[o],t));p[i.id]={id:i.id,refs:1,parts:s}}}}function n(e){for(var t=[],r={},i=0;i<e.length;i++){var n=e[i],o=n[0],s=n[1],a=n[2],l=n[3],d={css:s,media:a,sourceMap:l};r[o]?r[o].parts.push(d):t.push(r[o]={id:o,parts:[d]})}return t}function o(e,t){var r=h(),i=b[b.length-1];if("top"===e.insertAt)i?i.nextSibling?r.insertBefore(t,i.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function l(e,t){var r,i,n;if(t.singleton){var o=v++;r=m||(m=a(t)),i=d.bind(null,r,o,!1),n=d.bind(null,r,o,!0)}else r=a(t),i=u.bind(null,r),n=function(){s(r)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}function d(e,t,r,i){var n=r?"":i.css;if(e.styleSheet)e.styleSheet.cssText=g(t,n);else{var o=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function u(e,t){var r=t.css,i=t.media,n=t.sourceMap;if(i&&e.setAttribute("media",i),n&&(r+="\n/*# sourceURL="+n.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},c=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=f(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,v=0,b=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=c()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var r=n(e);return i(r,t),function(e){for(var o=[],s=0;s<r.length;s++){var a=r[s],l=p[a.id];l.refs--,o.push(l)}if(e){var d=n(e);i(d,t)}for(var s=0;s<o.length;s++){var l=o[s];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete p[l.id]}}}};var g=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,t,r){var i=r(2);"string"==typeof i&&(i=[[e.id,i,""]]);r(6)(i,{});i.locals&&(e.exports=i.locals)}]);
//# sourceMappingURL=build.js.map